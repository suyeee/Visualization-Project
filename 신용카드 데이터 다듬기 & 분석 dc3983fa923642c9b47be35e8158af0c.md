# 신용카드 데이터 다듬기 & 분석

날짜: 2022년 4월 27일 → 2022년 5월 2일
담당자: 황수연
사용 프로그램(프레임워크): Colab Notebook
사용언어: Python
태그: 데이터분석, 완료

# 27일 작업 리스트

- [x]  신용카드 데이터는 [데이터 후보군(데이터 확정)](https://www.notion.so/53d6e6b490574b8ca3e82fb86c7d08f0) 에서 1번 데이터중 `만원 단위` 데이터로 사용 예정
- [x]  컬럼 정리
- [x]  분석1 (전체적인 소비증가율 확인 및 시각화)-거리두기 on,off 합쳐서
- [ ]  특성 조합 및 특성 추가

# 28일 작업리스트

- [x]  분석2 (세분화된 업종을 큰업종별로 합친후 거리두기 on,off 에 따른 소비변화율 확인 및 시각화)
    - 시각화 에러생김→ 29일 수정
    - 특성추가 할거 생김 → 29일 수정
- [ ]  분석3 데이터 정제

# 29일 작업리스트

- [x]  분석 2 시각화 에러 수정
- [x]  분석 2  업종별 증감률 특성추가
- [x]  분석2 증감률 시각화
- [x]  분석3 데이터 정제
- [x]  분석3 시각화

# 변수명 정리(신용카드 월별 일평균데이터)

### 컬럼명

| 기존 칼럼명 | 변경한 칼럼명 |
| --- | --- |
| 항목명1 | 지역 |
| 항목명2 | 업종명 |

### 변수명

| 변수명 | 용도 | 형태 |
| --- | --- | --- |
| df | 원본데이터 다듬은것 | 데이터프레임 |
| credit_df | df 의 복사본 | 데이터프레임 |
| on_df | 거리두기 on 기간의 데이터 | 데이터프레임 |
| off_df | 거리두기 off 기간의 데이터 | 데이터프레임 |
|  | 분석1 |  |
| df1 | 업종명==합계 인 데이터  | 데이터프레임 |
| month_data | 2019/01 ~2022/01, 날짜 데이터 | 리스트 |
| sum_data | 월별 전국의 카드매출액 합계 데이터 | 리스트 |
| df1_month | month_data 를 데이터프레임에 담아낸것 | 데이터프레임 |
| df1_sum | sum_data 를 데이터프레임에 담아낸것 | 데이터프레임 |
| sumall_df | df1_month 와 df1_sum 를 병합한것 | 데이터프레임 |
|  | 분석2 |  |
| df2 | 업종명 ≠ 합계 인 데이터 | 데이터프레임 |
| df2_sum | 큰 카테고리의 업종명으로 합친 데이터 →작업후 df2에 할당했음. | 데이터프레임 |
| df2_on | 큰 카테고리의 업종명 데이터중 거리두기 on 기간의 데이터 | 데이터프레임 |
| df2_off | 큰 카테고리의 업종명 데이터중 거리두기 off 기간의 데이터 | 데이터프레임 |
| df2mean_onoff | 업종별 on 시기 평균 매출액, 업종별 off 시기 평균 매출액, 증감률(off→on) 데이터 | 데이터프레임 |
|  |  |  |
|  | 분석3  |  |
| df3 | 세분화된 업종들의 지역 합계 금액 데이터 ( 업종명 == 합계도 포함) | 데이터프레임 |
| df3_on | df3 의 on 시기만 | 데이터프레임 |
| df3_off | df3 의 off 시기만 | 데이터프레임 |
| df3mean_onoff | 업종명, off 평균, on 평균, off 비중, on 비중, 비중변화정도(on-off) 데이터 | 데이터프레임 |
| df3_s | df3mean_onoff 에서 업종명 ≠ ‘기타’,’합계’ 인 데이터 | 데이터프레임 |
| df3_i | df3_s 의 업종명 리스트 (띄어쓰기 없앤것) | 리스트 |
| df3a3_on | 큰 카테고리에서 매출 상위 6위까지의 세분화된 카테고리들의 on 비중과 비중변화정도(on-off) 데이터 | 데이터프레임 |
| df3a3_off | 큰 카테고리에서 매출 상위 6위까지의 세분화된 카테고리들의 off 비중과 비중변화정도(on-off) 데이터 | 데이터프레임 |
|  |  |  |
|  |  |  |

# 분석

<aside>
💡 `거리두기모드 on` : 2020-02-29~2022-04-17

`거리두기모드 off` : 2019-01~2020-02-28 & 2022-04-18~

- 2020-01-20 : 첫 확진자 발생
- 2020-02-29 : 사회적 거리두기 첫 시행일
</aside>

## 분석1

- 확인하고싶은것(목표)
    - 월 별 매출 변화율 분석 (거리두기 on + off 전부 합쳐서)
    - 전체적인 매출 변화율 확인하기
- 시각화
    
    ![Untitled](%E1%84%89%E1%85%B5%E1%86%AB%E1%84%8B%E1%85%AD%E1%86%BC%E1%84%8F%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%83%E1%85%A1%E1%84%83%E1%85%B3%E1%86%B7%E1%84%80%E1%85%B5%20&%20%E1%84%87%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A5%E1%86%A8%20dc3983fa923642c9b47be35e8158af0c/Untitled.png)
    
    - **거리두기 첫 시행기간(2020-02-29~)**에 전국적으로 **매출액이 대폭 하락**했다.
    - **카드 매출액**이 시간이 갈수록 **높아지고 있다**
        - 점점 온라인 배달주문 시스템이 확장됨에 따라 집에서도 편하게 무엇이든 주문이 가능해졌다. ex) 거리두기 시행의 여파로 손님확보를 위해 전통시장에서도 배달서비스를 시작했음.
        - 직접 매장을 방문하여 오프라인(ex.시장)에서 현금을 많이 사용하던 사람도 거리두기로 인해 집에서 온라인쇼핑이나 앱으로 물건이나 음식을 주문후 배달받는 경우가 많아짐에 따라 현금보다 카드 사용률이 증가했을것으로 생각됨.
    - **2021-07 ~ 2021-08 기간**에 **소비율 하락**을 보이는 이유
        - 백신 미접종자의 5인 이상 집합금지 시행 (2021.7.19~10.31)으로 인해 모임을 가지기 힘들어서?
            - 자료 좀더 찾아봐야겟다.
    - 제일 **peak 를 찍은 2021-10 ~ 2021-11 월**은 **상생소비지원금 시행기간**이였다. **그에따른 소비자들의 카드사용액 증가로 보여짐.**
        - 상생소비지원금
            - 지역경제 활성화와 소비회복 촉진을 위해 신용 또는 체크카드를 2분기 월평균 사용액보다 3% 많이 쓰면, 3%를 넘는 증가분의 10%를 1인당 월 10만원까지 현금성 충전금으로 환급해 주는 사업

## 분석2

- 확인하고싶은것(목표)
    - 세분화된 업종들을 큰 카테고리로 묶어서 거리두기 on,off 의 차이 확인해보기
- 해야될 작업
    - 세분화된 업종들 큰 카테고리로 묶어야됨
        
        [세분화된 업종 하나로 묶기](%E1%84%89%E1%85%B5%E1%86%AB%E1%84%8B%E1%85%AD%E1%86%BC%E1%84%8F%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%83%E1%85%A1%E1%84%83%E1%85%B3%E1%86%B7%E1%84%80%E1%85%B5%20&%20%E1%84%87%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A5%E1%86%A8%20dc3983fa923642c9b47be35e8158af0c/%E1%84%89%E1%85%A6%E1%84%87%E1%85%AE%E1%86%AB%E1%84%92%E1%85%AA%E1%84%83%E1%85%AC%E1%86%AB%20%E1%84%8B%E1%85%A5%E1%86%B8%E1%84%8C%E1%85%A9%E1%86%BC%20%E1%84%92%E1%85%A1%E1%84%82%E1%85%A1%E1%84%85%E1%85%A9%20%E1%84%86%E1%85%AE%E1%86%A9%E1%84%80%E1%85%B5%205c465ec94771419d9db3e7d0c4937347.md)
        
    - 거리두기 on, off 로 쪼개고
    - 시각화는 2개로  확인
        - bar plot 이 업종별로 매출액 확인하기에 더 좋은것같아서 bar 또는 barh 로 사용
    - 추가 작업 (특성 추가)
        - 업종별 off 시기→on 시기 매출액 증감률 구해서 특성추가하기
        - 증감률 시각화 하기
- 시각화
    - 업종별 신용카드 매출액
    
    ![Untitled](%E1%84%89%E1%85%B5%E1%86%AB%E1%84%8B%E1%85%AD%E1%86%BC%E1%84%8F%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%83%E1%85%A1%E1%84%83%E1%85%B3%E1%86%B7%E1%84%80%E1%85%B5%20&%20%E1%84%87%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A5%E1%86%A8%20dc3983fa923642c9b47be35e8158af0c/Untitled%201.png)
    
    - 매출 증감률
    
    ![Untitled](%E1%84%89%E1%85%B5%E1%86%AB%E1%84%8B%E1%85%AD%E1%86%BC%E1%84%8F%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%83%E1%85%A1%E1%84%83%E1%85%B3%E1%86%B7%E1%84%80%E1%85%B5%20&%20%E1%84%87%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A5%E1%86%A8%20dc3983fa923642c9b47be35e8158af0c/Untitled%202.png)
    
    - 거리두기 시행 후(on) 매출이 감소한 업종들 중에 **여행/ 교통 업종**의 **매출 감소율**이 **가장 크다.**
    - **증가율이 제일 높은 업종**은 **전자상거래/ 통신판매**이다. 이것도 온라인(비대면) 배달주문 시스템이 확장됨에 따라 증가한것으로 보여진다.
        - 뉴스기사
            
            > **거리두기 강화에 온라인 장보기 급증…품절 속출**
            > 
            
            > 코로나 재확산에 따른 사회적 거리 두기 강화로 외식 대신 온라인 식재료 쇼핑이 늘며 주요 온라인 쇼핑몰에서 식재료 품절이 반복되고 있습니다.
            > 
    - **교육 업종**의 **매출 감소**는 교육환경이 점점 온라인 교육으로 전환됨으로서 발생한 현상으로 보여진다.
        - 온라인 교육의 강의 결제비용은 전자상거래 업종으로 매출액이 들어간다.
    - **의류/잡화 업종**의 **매출감소** 역시 거리두기로 인해 발생한것으로 보인다
        - 자가격리나 거리두기 정책으로 인해 외출할 일이 적어지니 옷이나 화장품, 악세사리같은 **필수 소비재가 아닌 업종에 대한 소비자의 지출이 감소**한것으로 보여진다.
        - 거리두기로 인해 임금이 적어진 경우(실업자, 코로나 확진자로 인한 휴무 등등)  적어진 임금으로 생활해야하므로 생활 필수소비재에 해당하지않는 소비재에 대한 소비가 줄어들었을것으로 예상된다.
            
            > [뉴스기사] 서울대의 한 연구팀에 따르면 잠재 실업자를 포함하는 **실업자의 28%가 코로나19로 실직**하였고 41%가 경제적 위기를 경험하였고 48%가 극단적 선택을 고려하였다. **특히 자영업자의 피해가 심하다**. 고용 회복세에도 자영업자는 1년 전 보다 불과 6만 명 늘어났다. 전체 취업자에서 자영업자가 차지하는 비중은 통계청 공식 통계에서 처음으로 20% 밑으로 떨어졌다. 늘어났다고는 하나 자영업자 수는 2020년 3월과 비교하면 줄어들었다. **직원을 둔 자영업자**가 지난 해 11월까지 **36개월 연속 감소**하였다.
            > 
    - 숙박/음식, 오락/문화, 여행/교통의 경우도 일상생활을 하는데 있어 꼭 필요하지않은 업종들 이기도하고 거리두기와 사적모임 금지로 인해 매출이 감소했을것으로 예상된다.
    - 자동차 업종의 매출 증가는 확진자와의 접촉에 대한 소비자들의 걱정, 두려움이 만들어낸 결과로 예상된다.
        - 많은 인원이 함께 이용해야하는 대중교통 업종은 여행/ 교통 카테고리에 포함되어있는데 여행/교통 카테고리의 평균 매출액은 off 시기와 비교했을때 크게 감소했고 그에 반해 자동차업종의 평균 매출액 증가율은 증가율 순위 2위를 차지할만큼 높다.
    

## 분석3

- 확인하고싶은것(목표)
    - 거리두기 on 과 off 에 따라 사람들이 소비하는 주요소비 카테고리가 많이 차이가 날까?
    - 카테고리 소비의 차이가 크게 난다면 왜 그럴지 분석
        - 뉴스나 논문 참고
- 해야될 작업
    - 전체 매출 대비 큰업종 카테고리들이  자치하는 비중 구하기 (1-5위)
        - 합계데이터는 df2mean_onoff 에서 on 합계, off 합계를 구해 df2mean_onoff에 추가시키기
            - 분석1의 sumall_df 업종합계 금액이랑 df2 에서 업종 합계 계산한게 약간의 오차가 있음. +-50 정도?
            - 이미 있는 업종합계를 쓰기보단 직접 구해서 써야됨.
        - df2mean_onoff 에서 제외시킬 업종 데이터 작업
        - df2mean_onoff 에 차지비중 데이터 추가시키기
    - 매출액 순위 상위권을 자지하는 큰 업종들의 세분화된 업종으로 매출액 확인하기 on/off 나눠서 작업
        - 지역 정보랑 연계해서 보면 좋을듯? 세분화된 업종에도 각각 업종들 중 소비 1위 지역은 어딘지?
        - ex) 백화점 업종에서는 서울이 매출액이 가장 높았고 면세점 업종에서는 인천의 매출액이 가장 높았다. 등등
    - 파이차트 작업
        - 거리두기 on vs 거리두기 off 2개로 나눠서 만들고
        - 파이차트에 비율표시하는데 전체소비를 100으로 두고 그중 몇프로의 비중을 차지하는지 각 카테고리에 표시
    - bar plot 작업(미정)
- 분석방향
    - 큰업종으로 먼저 시각화(파이차트)해서 보고 매출 1~5위 를 따로 세분화된 업종으로 확인해서 그중에서도 어떤것의 매출이 큰지 확인(bar plot으로?)
        - ex) 종합소매는 매출액 2위 인데 종합소매중 백화점의 매출액은 어떻고, 면세점의 매출액은 어떻고... 등등
- 시각화1

![Untitled](%E1%84%89%E1%85%B5%E1%86%AB%E1%84%8B%E1%85%AD%E1%86%BC%E1%84%8F%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%83%E1%85%A1%E1%84%83%E1%85%B3%E1%86%B7%E1%84%80%E1%85%B5%20&%20%E1%84%87%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A5%E1%86%A8%20dc3983fa923642c9b47be35e8158af0c/Untitled%203.png)

![Untitled](%E1%84%89%E1%85%B5%E1%86%AB%E1%84%8B%E1%85%AD%E1%86%BC%E1%84%8F%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%83%E1%85%A1%E1%84%83%E1%85%B3%E1%86%B7%E1%84%80%E1%85%B5%20&%20%E1%84%87%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A5%E1%86%A8%20dc3983fa923642c9b47be35e8158af0c/Untitled%204.png)

- 시각화2 (큰업종별로 본 파이차트에서 상위 6개 업종들만 확인한 매출비중 변화정도)
    
    ![Untitled](%E1%84%89%E1%85%B5%E1%86%AB%E1%84%8B%E1%85%AD%E1%86%BC%E1%84%8F%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%83%E1%85%A1%E1%84%83%E1%85%B3%E1%86%B7%E1%84%80%E1%85%B5%20&%20%E1%84%87%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A5%E1%86%A8%20dc3983fa923642c9b47be35e8158af0c/Untitled%205.png)
    
    ![Untitled](%E1%84%89%E1%85%B5%E1%86%AB%E1%84%8B%E1%85%AD%E1%86%BC%E1%84%8F%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%83%E1%85%A1%E1%84%83%E1%85%B3%E1%86%B7%E1%84%80%E1%85%B5%20&%20%E1%84%87%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A5%E1%86%A8%20dc3983fa923642c9b47be35e8158af0c/Untitled%206.png)
    
    비중 % 옆 지역은 해당업종의 매출1위 지역을 표시한것.
    

- 시각화3 (전체적으로 확인)
    
    ![Untitled](%E1%84%89%E1%85%B5%E1%86%AB%E1%84%8B%E1%85%AD%E1%86%BC%E1%84%8F%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%83%E1%85%A1%E1%84%83%E1%85%B3%E1%86%B7%E1%84%80%E1%85%B5%20&%20%E1%84%87%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A5%E1%86%A8%20dc3983fa923642c9b47be35e8158af0c/Untitled%207.png)
    
    - ㅇ

## 분석4

- 확인하고싶은것(목표)
    - 코로나 확진자 데이터를 찾을수있다면 그데이터와 연결해서 상관관계 분석해보기
    - 확진자가 많이 나왔던 지역은 어떤소비형태를 보일까?
        - 확진자는 병원에 방문할꺼고 비확진자는 예방책으로 건강관련식품 소비를 한다던가?
    - 확진자가 많이 나온지역의 대중교통 소비액도 확인해보면 좋을듯함.
        - 확진자가 많은지역은 격리하느라 돌아다니는 사람수가 적어졌을테니
- 해야될 작업
    - 데이터 수집해야됨. → 크롤링
    - 확진자가 많이 나온 지역 상위 몇개만 뽑아서 확인할껀데 몇개를 뽑을건지 결정
    - 시각화는 뭘로 할껀지 고민